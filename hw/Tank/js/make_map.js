/*
地图绘制
*/

var expand_scale = 8;//空白区域方块的边长

//坦克
var tank_width = 3;
var tank_height = 4;
var tank_hypotenuse = Math.sqrt(tank_height*tank_height + tank_width*tank_width)/2;
var tank_angle = Math.atan(tank_width/tank_height);

var raw_width;
var raw_height;

//地图绘制
var maps = [
[
	"31111131311131113",
	"20000020200020002",
	"31303130203130313",
	"20002000200020002",
	"20302031303130313",
	"20202000002020002",
	"20313031113030302",
	"20000000000000202",
	"20313030311130202",
	"20200020000000202",
	"20311131303130313",
	"20200000000020002",
	"31303031303030313",
	"20002000202000002",
	"31113111313111113"
],[
	"31311111311111113111313",
	"20200000200000002000202",
	"20311130313031303130302",
	"20000020000000202000002",
	"31113020303130203031302",
	"20000020202000200020002",
	"31313030303130203031302",
	"20200000000000202020202",
	"20303031113130303130313",
	"20002000002020002020202",
	"20313031113030313030302",
	"20200000000000000000002",
	"31303030313030311131302",
	"20002020002020000020002",
	"20313031303131111130313",
	"20002000200020000000002",
	"31113111311131111111113"
],[
	"3111111111313111111111313",
	"2000000000202000000000202",
	"2031303030302031111111302",
	"2020002020002000000000002",
	"2031303130303031303031302",
	"2000202000200020202020002",
	"3130302030203130302031302",
	"2000002020202000002020002",
	"3130313031302031113131302",
	"2000000000002000000000002",
	"2031113030313111303111302",
	"2020002020002000202000202",
	"2030303131303031303130302",
	"2000200020000000202000002",
	"3130313020311130303130313",
	"2000000020000020002000002",
	"3111111131111131113111113"
],[
	"31111131311111111111113",
	"20000020200000000000002",
	"31113030303030311130313",
	"20002000002020200000002",
	"20313031113130303030313",
	"20002020000000002020002",
	"31302031303031302020302",
	"20202000202000202020202",
	"20303031302030203131302",
	"20000000202020202000002",
	"31303130303030303030313",
	"20202000000000000020002",
	"20303130313030303030302",
	"20000020200020202000202",
	"31113030313031313030313",
	"20000000200000200020002",
	"31111111311111311131113"
],[
	"31311111311111111111313",
	"20200000200000000000202",
	"20311130311131303130302",
	"20000020200020200000002",
	"20313030303130203111113",
	"20000000002000200000002",
	"31303111303130203130302",
	"20000000002000202020202",
	"31113130313030303031302",
	"20002000000020000020002",
	"31303111113031303020313",
	"20000000000000202020002",
	"31111111111111313131113"
],
[
	"31111111111131111111313",
	"20000000000020000000202",
	"31313031111130313030302",
	"20200020000000200020002",
	"20203130313031303020313",
	"20200000202000002020002",
	"20303111303111113131113",
	"20000000000000000000002",
	"31113111113031113031302",
	"20002000000000002000202",
	"31303130313031303131302",
	"20000000200020000020202",
	"31111130313130303030313",
	"20000020002000202000002",
	"31303130303130303111302",
	"20000000200000000000202",
	"31111111311111111111313"
],[
	"31311111311111311111113",
	"20200000200000200000002",
	"20313030303130313031302",
	"20002020000020202020202",
	"20313020313020303030302",
	"20002020200020000000002",
	"31303020313131313031302",
	"20000020002000200000002",
	"31303030313130313031302",
	"20002000000000200020202",
	"31313031303030303030313",
	"20202000002020002000202",
	"20303031302031113130302",
	"20000000002000000020002",
	"31111111113111111131113"
],[
	"31111131113111311111113",
	"20000020002000200000002",
	"31303030313130303130313",
	"20002000000000002000002",
	"31303111111130313130302",
	"20000000000000000000202",
	"31303111313031303111302",
	"20200000200020202000002",
	"20303030303020203130302",
	"20002020002020200020202",
	"31303130313030303020313",
	"20002000200000002020002",
	"31303130203130313031302",
	"20000000200020000020002",
	"20303031303131113030313",
	"20202020000000000000002",
	"31313131111111111111113"
],[
	"311111111131111111313",
	"200000000020000000202",
	"313031303030311130302",
	"200020202000200000002",
	"203030303130303130313",
	"202000002020000000002",
	"203130303030313031302",
	"200000200000202000002",
	"203030311130303031302",
	"202020000020000020202",
	"203130303130313030302",
	"202020202000000000002",
	"202031303130313030313",
	"202000000020000020002",
	"203111303130303131302",
	"200000000000200000002",
	"311111111111311111113"
],[
	"313131113111111131313",
	"202020002000000020202",
	"203030313130303030302",
	"200000202020202000002",
	"203030203030203031302",
	"202020200000200000002",
	"313130303130203131302",
	"200000002020200020202",
	"203130313031311130302",
	"202020002000000000002",
	"203031303131303111113",
	"200000202020000000002",
	"203130313031303130302",
	"202000000000002000202",
	"313111111111113111313"
]];

//将字符串数组解析为地图
function expand_map(id)
{
	var raw_map = maps[id];
	raw_width = raw_map[0].length;
	raw_height = raw_map.length;
	
	var map = [];
	for(var i=0;i<raw_map.length;i++)
	{
		var tem = [];
		for(var j=0;j<raw_map[i].length;j++)
		{
			if(j%2===0){
				tem.push(parseInt(raw_map[i].substring(j,j+1)));
			}else{
				for(var k=0;k<expand_scale;k++){
					tem.push(parseInt(raw_map[i].substring(j,j+1)));
				}
			}
		}
		map.push(tem);
		if(i%2===1)
		{
			for(var t=0;t<expand_scale-1;t++)
				map.push(tem);
		}
	}
	return map;
}